<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jardín Eterno de los 100 "Te Quiero"</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Playfair+Display:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,700;1,400&display=swap');
        
        :root {
            --color-primary: #8a5a7a;
            --color-secondary: #d23669;
            --color-accent: #ff9a9e;
            --color-text: #3a2a3a;
            --color-bg: #faf4f9;
            --color-card: rgba(255, 255, 255, 0.9);
        }
        
        body {
            font-family: 'Crimson Text', serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 30px;
            position: relative;
        }
        
        h1 {
            font-family: 'Playfair Display', serif;
            color: var(--color-primary);
            font-size: 3.5em;
            text-align: center;
            margin: 20px 0 10px;
            font-weight: 700;
            letter-spacing: 1px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            opacity: 0;
            animation: fadeIn 3s forwards;
            animation-delay: 0.5s;
        }
        
        .subtitle {
            text-align: center;
            font-style: italic;
            margin-bottom: 40px;
            color: var(--color-primary);
            opacity: 0.8;
            animation: fadeIn 3s forwards;
            animation-delay: 1s;
        }
        
        /* Botón de guía */
        .guide-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--color-secondary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            border: none;
        }
        
        .guide-btn:hover {
            transform: scale(1.1);
            background: var(--color-primary);
        }
        
        .guide-panel {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 300px;
            background: var(--color-card);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 99;
            display: none;
            border: 1px solid rgba(138, 90, 122, 0.3);
        }
        
        .guide-panel h3 {
            color: var(--color-primary);
            margin-top: 0;
        }
        
        .guide-panel ul {
            padding-left: 20px;
        }
        
        .guide-panel li {
            margin-bottom: 8px;
        }
        
        /* Sistema de jardín */
        .garden-section {
            margin-bottom: 50px;
            display: none;
            animation: fadeIn 1s;
        }
        
        .garden-section.active {
            display: block;
        }
        
        .garden-title {
            font-family: 'Playfair Display', serif;
            color: var(--color-primary);
            text-align: center;
            font-size: 2em;
            margin: 30px 0 20px;
            position: relative;
        }
        
        .garden-title:after {
            content: "";
            display: block;
            width: 100px;
            height: 2px;
            background: linear-gradient(to right, transparent, var(--color-secondary), transparent);
            margin: 10px auto;
        }
        
        .garden-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .flower {
            width: 100px;
            height: 100px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            cursor: pointer;
            transition: all 0.4s ease;
            background: var(--color-card);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .flower:hover {
            transform: translateY(-5px) rotate(2deg);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .flower::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, transparent 60%, rgba(255, 255, 255, 0.6) 90%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .flower:hover::before {
            opacity: 1;
        }
        
        .flower.blooming {
            animation: bloom 1s forwards;
        }
        
        @keyframes bloom {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        /* Mensajes */
        .message-display {
            min-height: 200px;
            margin: 40px auto;
            padding: 30px;
            background: var(--color-card);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid var(--color-secondary);
            position: relative;
            transition: all 0.5s ease;
        }
        
        .message-text {
            font-family: 'Dancing Script', cursive;
            font-size: 2em;
            text-align: center;
            color: var(--color-text);
            line-height: 1.4;
        }
        
        /* Progreso */
        .progress-container {
            position: sticky;
            top: 10px;
            background: var(--color-card);
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            z-index: 10;
        }
        
        .progress-title {
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--color-primary);
        }
        
        .progress-bar {
            height: 12px;
            background: #e8d8e4;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--color-accent), var(--color-secondary));
            width: 0%;
            transition: width 1s ease;
            border-radius: 6px;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            color: var(--color-primary);
        }
        
        /* Efectos especiales */
        .petals {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .petal {
            position: absolute;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23d23669"><path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            pointer-events: none;
            opacity: 0;
        }
        
        /* Final especial */
        .final-container {
            display: none;
            max-width: 600px;
            margin: 50px auto;
            padding: 40px;
            background: var(--color-card);
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            animation: fadeIn 2s;
            border: 2px dashed var(--color-secondary);
        }
        
        .final-title {
            font-family: 'Playfair Display', serif;
            color: var(--color-secondary);
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        
        .final-message {
            font-family: 'Dancing Script', cursive;
            font-size: 2em;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .final-btn {
            background: linear-gradient(to right, var(--color-accent), var(--color-secondary));
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
            font-family: 'Crimson Text', serif;
        }
        
        .final-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(210, 54, 105, 0.4);
        }
        
        /* Animaciones */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .garden-grid {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }
            
            .flower {
                width: 80px;
                height: 80px;
                font-size: 2em;
            }
            
            .message-text {
                font-size: 1.6em;
            }
            
            .guide-panel {
                width: 250px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="petals" id="petalsContainer"></div>
    
    <button class="guide-btn" id="guideBtn">?</button>
    <div class="guide-panel" id="guidePanel">
        <h3>Guía del Jardín</h3>
        <ul>
            <li><strong>Explora las flores</strong> para descubrir mensajes</li>
            <li><strong>Algunas flores</strong> requieren múltiples toques</li>
            <li><strong>Cada nivel</strong> se desbloquea al encontrar suficientes mensajes</li>
            <li><strong>Mensajes especiales</strong> valen más puntos</li>
            <li><strong>Objetivo:</strong> Descubrir los 100 "Te quiero" escondidos</li>
        </ul>
    </div>
    
    <div class="container">
        <h1>Jardín Eterno de los 100 "Te Quiero"</h1>
        <p class="subtitle">Cada flor guarda un secreto... ¿Encontrarás todos los que escondí para ti?</p>
        
        <div class="progress-container">
            <div class="progress-title">Progreso del Jardín</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-info">
                <span>Nivel: <span id="currentLevel">1</span></span>
                <span>Mensajes: <span id="discoveredCount">0</span>/100</span>
            </div>
        </div>
        
        <div class="message-display" id="messageDisplay">
            <div class="message-text" id="messageText">
                Toca una flor para comenzar tu viaje...
            </div>
        </div>
        
        <!-- Niveles del jardín -->
        <div class="garden-section active" id="gardenLevel1">
            <h2 class="garden-title">Jardín de los Primeros Susurros</h2>
            <div class="garden-grid" id="gardenGrid1"></div>
        </div>
        
        <div class="garden-section" id="gardenLevel2">
            <h2 class="garden-title">Bosque de los Secretos Compartidos</h2>
            <div class="garden-grid" id="gardenGrid2"></div>
        </div>
        
        <div class="garden-section" id="gardenLevel3">
            <h2 class="garden-title">Cámara del Corazón Eterno</h2>
            <div class="garden-grid" id="gardenGrid3"></div>
        </div>
        
        <!-- Final especial -->
        <div class="final-container" id="finalContainer">
            <h2 class="final-title">¡Has completado el jardín!</h2>
            <div class="final-message">
                Descubriste los 1000 "Te quiero" que escondí para ti...<br><br>
                Pero esto es solo el principio, porque cada día encuentro nuevas razones para amarte.<br><br>
                ¿Aceptas seguir cultivando este jardín conmigo... para siempre?
            </div>
            <button class="final-btn" id="finalYesBtn">¡Sí, por siempre!</button>
            <button class="final-btn" id="finalNoBtn">(Como si tuvieras opción)</button>
        </div>
    </div>

    <script>
        // Mensajes organizados por profundidad
        const messages = {
            level1: [
                "Te quiero como se ama el primer café de la mañana... con los ojos aún soñolientos.",
                "Te quiero como se ama ese rincón favorito donde siempre volvemos.",
                "Te quiero como se ama la canción que nos recuerda a aquel verano.",
                "Te quiero como se ama el olor a lluvia en el pavimento caliente.",
                "Te quiero como se ama la manta favorita en una noche fría.",
                "Te quiero como se ama el último bocado del postre más delicioso.",
                "Te quiero como se ama el silencio cómodo de dos almas que se entienden.",
                "Te quiero como se ama el primer día de vacaciones... lleno de posibilidades.",
                "Te quiero como se ama el viejo libro de páginas amarillentas.",
                "Te quiero como se ama la luz tenue de las velas en la intimidad."
            ],
            level2: [
                "🌿 Te quiero como se ama el jardín secreto que pocos conocen.",
                "📜 Te quiero como se ama el poema escrito en la primera página de un diario nuevo.",
                "🧩 Te quiero como se ama el momento en que todas las piezas del rompecabezas encajan.",
                "🌌 Te quiero como se ama la Vía Láctea en una noche despejada de verano.",
                "🎻 Te quiero como se ama la nota sostenida que hace cerrar los ojos.",
                "🕯️ Te quiero como se ama la última vela que se niega a apagarse.",
                "📖 Te quiero como se ama el libro que releemos aunque conozcamos el final.",
                "🗝️ Te quiero como se ama la llave que abre la puerta que nadie más puede abrir.",
                "🌊 Te quiero como se ama el mar cuando cambia de azul a plateado al atardecer.",
                "🕊️ Te quiero como se ama la paz después de una larga tormenta."
            ],
            level3: [
                "🔮 Te quiero como se ama el hechizo que no debería funcionar... pero funciona.",
                "⚗️ Te quiero como se ama la fórmula alquímica que convierte lo ordinario en oro.",
                "📜 Te quiero como se ama el manuscrito perdido de un autor amado.",
                "🗝️ Te quiero como se ama la llave maestra que abre todos los corazones.",
                "🌠 Te quiero como se ama el deseo hecho a las estrellas en una noche de agosto.",
                "🧿 Te quiero como se ama el amuleto que protegía a los antiguos viajeros.",
                "⚛️ Te quiero como se ama la respuesta al enigma que nadie podía resolver.",
                "🔑 Te quiero como se ama el último fragmento del mapa del tesoro.",
                "💎 Te quiero como se ama la gema perfecta que brilla con luz propia.",
                "🌹 Te quiero como se ama la rosa que florece contra todo pronóstico."
            ],
            rare: [
                "✨ Tesoro encontrado: Te quiero más que a todos mis recuerdos favoritos juntos.",
                "🔍 Mensaje secreto: Eres el enigma que prefiero no resolver.",
                "🎁 Regalo oculto: Te quiero como se guarda el mejor regalo para el momento perfecto.",
                "🏆 Logro legendario: Has encontrado uno de mis 'Te quiero' más preciados.",
                "💌 Carta sellada: Te quiero como se ama la tinta fresca en papel nuevo.",
                "🧭 Brújula dorada: Te quiero como se ama el norte en un mar sin horizonte.",
                "📜 Pergamino antiguo: Te quiero como se ama un juramento hecho bajo la luna llena.",
                "🔮 Bola de cristal: Te quiero como se ama un futuro que aún no se revela.",
                "🗝️ Llave maestra: Te quiero como se ama la solución a todos los acertijos.",
                "💎 Diamante oculto: Te quiero como se ama un tesoro que pocos pueden apreciar."
            ],
            final: [
                "Has descubierto los 1000 'Te quiero' que escondí en este jardín...",
                "Pero esto es solo el principio, porque cada día encuentro nuevas formas de amarte.",
                "El amor no es un juego que se gana, sino un jardín que se cultiva día a día.",
                "Y hoy, quiero que sepas que eres la flor más bella de todas las que he conocido.",
                "¿Aceptas seguir cultivando este jardín conmigo... para siempre?"
            ]
        };

        // Variables del juego
        let discoveredMessages = [];
        let totalPoints = 0;
        let currentLevel = 1;
        let ritualCounters = {};
        const POINTS_TO_LEVEL2 = 50;
        const POINTS_TO_LEVEL3 = 200;
        const POINTS_TO_FINISH = 1000;

        // Elementos del DOM
        const guideBtn = document.getElementById('guideBtn');
        const guidePanel = document.getElementById('guidePanel');
        const messageDisplay = document.getElementById('messageDisplay');
        const messageText = document.getElementById('messageText');
        const progressFill = document.getElementById('progressFill');
        const discoveredCount = document.getElementById('discoveredCount');
        const currentLevelSpan = document.getElementById('currentLevel');
        const gardenLevel1 = document.getElementById('gardenLevel1');
        const gardenLevel2 = document.getElementById('gardenLevel2');
        const gardenLevel3 = document.getElementById('gardenLevel3');
        const gardenGrid1 = document.getElementById('gardenGrid1');
        const gardenGrid2 = document.getElementById('gardenGrid2');
        const gardenGrid3 = document.getElementById('gardenGrid3');
        const finalContainer = document.getElementById('finalContainer');
        const finalYesBtn = document.getElementById('finalYesBtn');
        const finalNoBtn = document.getElementById('finalNoBtn');
        const petalsContainer = document.getElementById('petalsContainer');

        // Inicializar el jardín
        function initGarden() {
            createFlowers(gardenGrid1, 'level1', 20);
            createFlowers(gardenGrid2, 'level2', 20);
            createFlowers(gardenGrid3, 'level3', 20);
            
            // Mostrar primer mensaje
            setTimeout(() => {
                showMessage("Cada flor en este jardín guarda un 'Te quiero' especial para ti...", false);
            }, 1000);
            
            // Configurar botón de guía
            guideBtn.addEventListener('click', toggleGuide);
            
            // Configurar botones finales
            finalYesBtn.addEventListener('click', () => {
                showMessage("Sabía que dirías que sí... porque este amor nuestro está escrito en las estrellas ✨", true);
                createPetals(50);
                finalContainer.style.display = 'none';
            });
            
            finalNoBtn.addEventListener('click', () => {
                showMessage("¡Ja! Como si tuvieras opción. Te quiero demasiado para dejarte escapar ❤️", true);
                createPetals(30);
                finalContainer.style.display = 'none';
            });
        }

        // Crear flores para cada nivel
        function createFlowers(container, level, count) {
            const symbols = ['🌱', '🌿', '🍃', '🍀', '🌷', '🌸', '🌹', '🌺', '🌻', '🌼', '💐', '🏵️', '🌾', '🍂', '🍁'];
            
            for (let i = 0; i < count; i++) {
                const flower = document.createElement('div');
                flower.className = 'flower';
                flower.innerHTML = symbols[Math.floor(Math.random() * symbols.length)];
                flower.dataset.level = level;
                flower.dataset.index = i;
                
                // Algunas flores necesitan ritual (múltiples clics)
                if (Math.random() < 0.4) {
                    flower.dataset.ritual = Math.floor(Math.random() * 3) + 3; // 3-5 clics
                    flower.dataset.ritualCount = 0;
                }
                
                flower.addEventListener('click', () => interactWithFlower(flower));
                
                // Animación de aparición escalonada
                flower.style.animationDelay = `${i * 0.1}s`;
                
                container.appendChild(flower);
            }
        }

        // Interactuar con una flor
        function interactWithFlower(flower) {
            // Efecto visual
            flower.classList.remove('blooming');
            void flower.offsetWidth; // Trigger reflow
            flower.classList.add('blooming');
            
            // Verificar si necesita ritual
            if (flower.dataset.ritual) {
                const required = parseInt(flower.dataset.ritual);
                let current = parseInt(flower.dataset.ritualCount || 0) + 1;
                flower.dataset.ritualCount = current;
                
                // Si no ha completado el ritual
                if (current < required) {
                    showMessage(`La flor susurra... (${current}/${required})`, false);
                    createPetals(1, flower);
                    return;
                }
                
                // Ritual completado
                showMessage("¡Has completado el ritual! La flor revela su secreto...", false);
            }
            
            // Obtener mensaje apropiado
            const level = flower.dataset.level;
            let messagePool;
            let points = 1;
            let isRare = false;
            
            // 25% de probabilidad de mensaje raro
            if (Math.random() < 0.25) {
                messagePool = messages.rare;
                points = 5;
                isRare = true;
            } else {
                messagePool = messages[level];
                
                // Mensajes de niveles superiores valen más
                if (level === 'level2') points = 2;
                if (level === 'level3') points = 3;
            }
            
            // Seleccionar mensaje
            const messageIndex = Math.floor(Math.random() * messagePool.length);
            const messageKey = `${level}-${messageIndex}`;
            
            // Mostrar mensaje
            showMessage(messagePool[messageIndex], isRare);
            
            // Sumar puntos (si no es un mensaje repetido)
            if (!discoveredMessages.includes(messageKey) || isRare) {
                if (!discoveredMessages.includes(messageKey)) {
                    discoveredMessages.push(messageKey);
                }
                
                totalPoints += points;
                updateProgress();
                
                // Avanzar de nivel
                if (currentLevel === 1 && totalPoints >= POINTS_TO_LEVEL2) {
                    advanceToLevel(2);
                } else if (currentLevel === 2 && totalPoints >= POINTS_TO_LEVEL3) {
                    advanceToLevel(3);
                } else if (totalPoints >= POINTS_TO_FINISH) {
                    showFinal();
                }
            }
            
            // Efectos especiales
            createPetals(isRare ? 10 : 3, flower);
        }

        // Mostrar mensaje
        function showMessage(message, isSpecial) {
            messageDisplay.style.opacity = '0';
            
            setTimeout(() => {
                messageText.innerHTML = message;
                messageDisplay.style.opacity = '1';
                
                // Efecto especial para mensajes importantes
                if (isSpecial) {
                    messageDisplay.style.borderLeft = '5px solid var(--color-secondary)';
                    messageDisplay.style.background = 'rgba(255, 154, 158, 0.1)';
                    
                    setTimeout(() => {
                        messageDisplay.style.borderLeft = '5px solid var(--color-secondary)';
                        messageDisplay.style.background = 'var(--color-card)';
                    }, 2000);
                }
            }, 300);
        }

        // Avanzar de nivel
        function advanceToLevel(level) {
            currentLevel = level;
            currentLevelSpan.textContent = level;
            
            if (level === 2) {
                gardenLevel2.classList.add('active');
                showMessage("¡Has desbloqueado el Bosque de los Secretos Compartidos! Aquí los mensajes son más profundos...", true);
            } else if (level === 3) {
                gardenLevel3.classList.add('active');
                showMessage("¡Llegaste a la Cámara del Corazón Eterno! Aquí guardo los 'Te quiero' más valiosos...", true);
            }
            
            createPetals(15);
        }

        // Mostrar final
        function showFinal() {
            finalContainer.style.display = 'block';
            createPetals(100);
        }

        // Actualizar progreso
        function updateProgress() {
            const progress = (totalPoints / POINTS_TO_FINISH) * 100;
            progressFill.style.width = `${progress}%`;
            discoveredCount.textContent = totalPoints;
            
            // Cambiar color de la barra
            if (progress >= 50) {
                progressFill.style.background = 'linear-gradient(to right, var(--color-accent), var(--color-primary))';
            }
            if (progress >= 80) {
                progressFill.style.background = 'linear-gradient(to right, var(--color-primary), var(--color-secondary))';
            }
        }

        // Crear pétalos animados
        function createPetals(count, element = null) {
            const rect = element ? element.getBoundingClientRect() : {
                left: window.innerWidth / 2,
                top: window.innerHeight / 2,
                width: 0,
                height: 0
            };
            
            for (let i = 0; i < count; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal';
                
                // Tamaño aleatorio
                const size = Math.random() * 20 + 10;
                petal.style.width = `${size}px`;
                petal.style.height = `${size}px`;
                
                // Posición inicial cerca del elemento
                const x = rect.left + (Math.random() * rect.width);
                const y = rect.top + (Math.random() * rect.height);
                petal.style.left = `${x}px`;
                petal.style.top = `${y}px`;
                
                // Animación
                const duration = Math.random() * 3 + 2;
                petal.style.animation = `float ${duration}s linear forwards`;
                
                // Rotación aleatoria
                petal.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                // Opacidad aleatoria
                petal.style.opacity = Math.random() * 0.7 + 0.3;
                
                petalsContainer.appendChild(petal);
                
                // Eliminar después de la animación
                setTimeout(() => {
                    petal.remove();
                }, duration * 1000);
            }
        }

        // Mostrar/ocultar guía
        function toggleGuide() {
            guidePanel.style.display = guidePanel.style.display === 'block' ? 'none' : 'block';
        }

        // Inicializar el juego
        window.onload = function() {
            initGarden();
        };
    </script>
</body>
</html>